# é¡¹ç›®ç›®å½•ç»“æ„

```
pbl-intelligent-assistant/
â”œâ”€â”€ ğŸ“ app/                           # ä¸»åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ ğŸ“ api/                       # APIè·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“ v1/                    # APIç‰ˆæœ¬1
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ agents.py             # æ™ºèƒ½ä½“ç›¸å…³æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py               # è®¤è¯æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ courses.py            # è¯¾ç¨‹ç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ projects.py           # é¡¹ç›®ç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.py          # WebSocketæ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ health.py             # å¥åº·æ£€æŸ¥
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ ğŸ“ core/                      # æ ¸å¿ƒé…ç½®å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py                 # åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ dependencies.py           # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”œâ”€â”€ exceptions.py             # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â”œâ”€â”€ middleware.py             # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ security.py               # å®‰å…¨ç›¸å…³
â”‚   â”œâ”€â”€ ğŸ“ models/                    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py                   # åŸºç¡€æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.py                   # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ course.py                 # è¯¾ç¨‹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ project.py                # é¡¹ç›®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ agent.py                  # æ™ºèƒ½ä½“æ¨¡å‹
â”‚   â”‚   â””â”€â”€ session.py                # ä¼šè¯æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“ schemas/                   # Pydanticæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py                   # åŸºç¡€æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ user.py                   # ç”¨æˆ·ç›¸å…³æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ course.py                 # è¯¾ç¨‹ç›¸å…³æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ project.py                # é¡¹ç›®ç›¸å…³æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ agent.py                  # æ™ºèƒ½ä½“æ¨¡å¼
â”‚   â”‚   â””â”€â”€ websocket.py              # WebSocketæ¶ˆæ¯æ¨¡å¼
â”‚   â”œâ”€â”€ ğŸ“ services/                  # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth_service.py           # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ course_service.py         # è¯¾ç¨‹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ project_service.py        # é¡¹ç›®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ agent_orchestrator.py     # æ™ºèƒ½ä½“ç¼–æ’æœåŠ¡
â”‚   â”‚   â””â”€â”€ websocket_manager.py      # WebSocketç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ agents/                    # æ™ºèƒ½ä½“å®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_agent.py             # åŸºç¡€æ™ºèƒ½ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ education_director.py     # æ•™è‚²æ€»ç›‘
â”‚   â”‚   â”œâ”€â”€ pbl_curriculum_designer.py # PBLè¯¾ç¨‹è®¾è®¡å¸ˆ
â”‚   â”‚   â”œâ”€â”€ learning_experience_designer.py # å­¦ä¹ ä½“éªŒè®¾è®¡å¸ˆ
â”‚   â”‚   â”œâ”€â”€ creative_technologist.py  # åˆ›æ„æŠ€æœ¯ä¸“å®¶
â”‚   â”‚   â”œâ”€â”€ makerspace_manager.py     # åˆ›å®¢ç©ºé—´ç®¡ç†å‘˜
â”‚   â”‚   â””â”€â”€ agent_factory.py          # æ™ºèƒ½ä½“å·¥å‚
â”‚   â”œâ”€â”€ ğŸ“ db/                        # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py                   # æ•°æ®åº“åŸºç¡€é…ç½®
â”‚   â”‚   â”œâ”€â”€ session.py                # æ•°æ®åº“ä¼šè¯
â”‚   â”‚   â””â”€â”€ migrations/               # Alembicè¿ç§»æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ logger.py                 # æ—¥å¿—é…ç½®
â”‚   â”‚   â”œâ”€â”€ cache.py                  # ç¼“å­˜å·¥å…·
â”‚   â”‚   â”œâ”€â”€ vector_store.py           # å‘é‡å­˜å‚¨å·¥å…·
â”‚   â”‚   â””â”€â”€ file_handler.py           # æ–‡ä»¶å¤„ç†
â”‚   â”œâ”€â”€ ğŸ“ tasks/                     # å¼‚æ­¥ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ agent_tasks.py            # æ™ºèƒ½ä½“ä»»åŠ¡
â”‚   â”‚   â””â”€â”€ background_tasks.py       # åå°ä»»åŠ¡
â”‚   â””â”€â”€ main.py                       # åº”ç”¨å…¥å£
â”œâ”€â”€ ğŸ“ tests/                         # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ ğŸ“ unit/                      # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_agents/
â”‚   â”‚   â”œâ”€â”€ test_services/
â”‚   â”‚   â””â”€â”€ test_models/
â”‚   â”œâ”€â”€ ğŸ“ integration/               # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_api/
â”‚   â”‚   â””â”€â”€ test_websocket/
â”‚   â”œâ”€â”€ ğŸ“ e2e/                       # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ conftest.py                   # pytesté…ç½®
â”œâ”€â”€ ğŸ“ scripts/                       # éƒ¨ç½²å’Œè¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ init_db.py                    # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ migrate.py                    # æ•°æ®è¿ç§»
â”‚   â””â”€â”€ seed_data.py                  # æµ‹è¯•æ•°æ®å¡«å……
â”œâ”€â”€ ğŸ“ docker/                        # Dockeré…ç½®
â”‚   â”œâ”€â”€ Dockerfile                    # ç”Ÿäº§é•œåƒ
â”‚   â”œâ”€â”€ Dockerfile.dev                # å¼€å‘é•œåƒ
â”‚   â””â”€â”€ nginx/                        # Nginxé…ç½®
â”œâ”€â”€ ğŸ“ k8s/                          # Kubernetesé…ç½®
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ service.yaml
â”‚   â”œâ”€â”€ configmap.yaml
â”‚   â””â”€â”€ ingress.yaml
â”œâ”€â”€ ğŸ“ monitoring/                    # ç›‘æ§é…ç½®
â”‚   â”œâ”€â”€ prometheus.yml
â”‚   â”œâ”€â”€ grafana/
â”‚   â””â”€â”€ alerts.yml
â”œâ”€â”€ ğŸ“ docs/                         # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ api.md                       # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ deployment.md                # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ architecture.md              # æ¶æ„æ–‡æ¡£
â”œâ”€â”€ .env.example                     # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore                       # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ docker-compose.yml               # ç”Ÿäº§ç¯å¢ƒcompose
â”œâ”€â”€ docker-compose.dev.yml           # å¼€å‘ç¯å¢ƒcompose
â”œâ”€â”€ pyproject.toml                   # Poetryé…ç½®
â”œâ”€â”€ poetry.lock                      # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ alembic.ini                      # Alembicé…ç½®
â”œâ”€â”€ requirements.txt                 # pipä¾èµ–ï¼ˆå…¼å®¹ï¼‰
â””â”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
```

## ç›®å½•è¯´æ˜

### ğŸ“ app/ - ä¸»åº”ç”¨ä»£ç 

#### api/ - APIè·¯ç”±å±‚
- **v1/**: APIç‰ˆæœ¬æ§åˆ¶ï¼Œä¾¿äºåç»­è¿­ä»£å‡çº§
- **agents.py**: æ™ºèƒ½ä½“äº¤äº’æ¥å£ï¼Œæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è°ƒç”¨
- **websocket.py**: å®æ—¶é€šä¿¡æ¥å£ï¼Œæ”¯æŒå¤šç”¨æˆ·åä½œ

#### core/ - æ ¸å¿ƒåŸºç¡€è®¾æ–½
- **config.py**: ç»Ÿä¸€é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤šç¯å¢ƒé…ç½®
- **dependencies.py**: FastAPIä¾èµ–æ³¨å…¥ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€ç¼“å­˜ç­‰
- **middleware.py**: è¯·æ±‚å¤„ç†ä¸­é—´ä»¶ï¼ŒåŒ…æ‹¬CORSã€æ—¥å¿—ç­‰
- **security.py**: å®‰å…¨è®¤è¯ï¼ŒJWTä»¤ç‰Œç®¡ç†

#### models/ - æ•°æ®æ¨¡å‹å±‚
- ä½¿ç”¨SQLAlchemy ORMå®šä¹‰æ•°æ®åº“æ¨¡å‹
- æ”¯æŒå…³ç³»æ˜ å°„å’Œæ•°æ®éªŒè¯
- åŒ…å«å®¡è®¡å­—æ®µï¼ˆåˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰ï¼‰

#### schemas/ - æ•°æ®æ¨¡å¼å±‚
- Pydanticæ¨¡å‹å®šä¹‰APIè¾“å…¥è¾“å‡ºæ ¼å¼
- è‡ªåŠ¨ç”ŸæˆOpenAPIæ–‡æ¡£
- æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–

#### services/ - ä¸šåŠ¡é€»è¾‘å±‚
- **agent_orchestrator.py**: æ™ºèƒ½ä½“ç¼–æ’æ ¸å¿ƒï¼Œæ”¯æŒå¤æ‚å·¥ä½œæµ
- **websocket_manager.py**: WebSocketè¿æ¥ç®¡ç†å’Œæ¶ˆæ¯è·¯ç”±
- ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®è®¿é—®åˆ†ç¦»

#### agents/ - æ™ºèƒ½ä½“å®ç°å±‚
- **base_agent.py**: æ™ºèƒ½ä½“åŸºç±»ï¼Œå®šä¹‰ç»Ÿä¸€æ¥å£
- å„ä¸“ä¸šæ™ºèƒ½ä½“å®ç°ï¼Œç»§æ‰¿è‡ªåŸºç±»
- **agent_factory.py**: å·¥å‚æ¨¡å¼åˆ›å»ºæ™ºèƒ½ä½“å®ä¾‹

#### db/ - æ•°æ®åº“å±‚
- SQLAlchemyé…ç½®å’Œä¼šè¯ç®¡ç†
- Alembicæ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶
- æ”¯æŒè¯»å†™åˆ†ç¦»å’Œè¿æ¥æ± 

#### utils/ - å·¥å…·å‡½æ•°å±‚
- **logger.py**: ç»“æ„åŒ–æ—¥å¿—é…ç½®
- **cache.py**: Redisç¼“å­˜å°è£…
- **vector_store.py**: ChromaDBå‘é‡æ“ä½œ

#### tasks/ - å¼‚æ­¥ä»»åŠ¡å±‚
- åŸºäºRedis Streamsçš„ä»»åŠ¡é˜Ÿåˆ—
- æ”¯æŒä»»åŠ¡é‡è¯•å’Œé”™è¯¯å¤„ç†
- æ™ºèƒ½ä½“é•¿æ—¶é—´è¿è¡Œä»»åŠ¡å¼‚æ­¥åŒ–

### ğŸ“ tests/ - æµ‹è¯•ä»£ç 
- **unit/**: å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–ç‡è¦æ±‚80%+
- **integration/**: é›†æˆæµ‹è¯•ï¼Œæµ‹è¯•æ¨¡å—é—´äº¤äº’
- **e2e/**: ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œæ¨¡æ‹Ÿå®Œæ•´ç”¨æˆ·æµç¨‹

### ğŸ“ docker/ - å®¹å™¨åŒ–é…ç½®
- å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒå¤§å°
- å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒåˆ†ç¦»
- Nginxåå‘ä»£ç†é…ç½®

### ğŸ“ k8s/ - Kuberneteséƒ¨ç½²
- æ”¯æŒæ°´å¹³æ‰©å±•
- é…ç½®çƒ­æ›´æ–°
- æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡

### ğŸ“ monitoring/ - ç›‘æ§é…ç½®
- PrometheusæŒ‡æ ‡é‡‡é›†
- Grafanaå¯è§†åŒ–é¢æ¿
- å‘Šè­¦è§„åˆ™é…ç½®

## è®¾è®¡åŸåˆ™

### 1. åˆ†å±‚æ¶æ„
- **è¡¨ç°å±‚**: APIè·¯ç”±å’ŒWebSocket
- **ä¸šåŠ¡å±‚**: æœåŠ¡é€»è¾‘å’Œæ™ºèƒ½ä½“ç¼–æ’
- **æ•°æ®å±‚**: æ¨¡å‹å®šä¹‰å’Œæ•°æ®è®¿é—®
- **åŸºç¡€è®¾æ–½å±‚**: é…ç½®ã€ç¼“å­˜ã€æ—¥å¿—ç­‰

### 2. ä¾èµ–å€’ç½®
- é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—
- é€šè¿‡æ¥å£å’Œä¾èµ–æ³¨å…¥è§£è€¦
- ä¾¿äºå•å…ƒæµ‹è¯•å’Œæ¨¡å—æ›¿æ¢

### 3. å•ä¸€èŒè´£
- æ¯ä¸ªæ¨¡å—èŒè´£æ˜ç¡®
- åŠŸèƒ½å†…èšï¼Œé™ä½è€¦åˆ
- ä¾¿äºç»´æŠ¤å’Œæ‰©å±•

### 4. å¼€é—­åŸåˆ™
- å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- é€šè¿‡ç»§æ‰¿å’Œç»„åˆå®ç°åŠŸèƒ½æ‰©å±•
- æ’ä»¶åŒ–æ™ºèƒ½ä½“æ¶æ„

### 5. æ¥å£éš”ç¦»
- å®¢æˆ·ç«¯ä¸ä¾èµ–ä¸éœ€è¦çš„æ¥å£
- APIç‰ˆæœ¬æ§åˆ¶
- æ™ºèƒ½ä½“æ¥å£æ ‡å‡†åŒ–

## æ‰©å±•æ€§è€ƒè™‘

### æ°´å¹³æ‰©å±•
- æ— çŠ¶æ€æœåŠ¡è®¾è®¡
- ä¼šè¯ä¿¡æ¯å­˜å‚¨åœ¨Redis
- æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²

### æ™ºèƒ½ä½“æ‰©å±•
- åŸºäºæ¥å£çš„æ™ºèƒ½ä½“è§„èŒƒ
- åŠ¨æ€åŠ è½½æ–°æ™ºèƒ½ä½“
- æ”¯æŒå¤–éƒ¨æ™ºèƒ½ä½“æ¥å…¥

### å­˜å‚¨æ‰©å±•
- æ•°æ®åº“è¯»å†™åˆ†ç¦»
- ç¼“å­˜åˆ†å±‚è®¾è®¡
- å‘é‡æ•°æ®åº“æ°´å¹³åˆ†ç‰‡

### åŠŸèƒ½æ‰©å±•
- æ’ä»¶åŒ–æ¶æ„
- å¾®æœåŠ¡æ‹†åˆ†å‡†å¤‡
- APIç½‘å…³æ”¯æŒ