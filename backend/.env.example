# PBL智能助手 - 环境变量配置示例
# 复制此文件为 .env 并填入实际的配置值

# =============================================================================
# 应用基础配置
# =============================================================================
ENVIRONMENT=development
DEBUG=true
SECRET_KEY=your-super-secret-key-at-least-32-characters-long
APP_NAME=PBL智能助手
APP_VERSION=1.0.0

# API配置
API_V1_PREFIX=/api/v1
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS配置
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com

# =============================================================================
# 数据库配置
# =============================================================================

# PostgreSQL主数据库
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_USER=pbl_user
POSTGRES_PASSWORD=your_strong_postgres_password
POSTGRES_DB=pbl_assistant

# Redis缓存
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_SESSION_DB=2

# ChromaDB向量数据库
CHROMA_HOST=localhost
CHROMA_PORT=8000
CHROMA_COLLECTION_NAME=pbl_knowledge

# =============================================================================
# 大语言模型配置
# =============================================================================

# LLM提供商 (openai, anthropic, azure)
LLM_PROVIDER=openai

# OpenAI配置
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-large

# Anthropic配置
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key
ANTHROPIC_MODEL=claude-3-opus-20240229

# Azure OpenAI配置
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-key
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# =============================================================================
# 智能体配置
# =============================================================================
AGENT_MAX_TOKENS=4000
AGENT_TEMPERATURE=0.7
AGENT_TIMEOUT_SECONDS=60
AGENT_MAX_RETRIES=3

# =============================================================================
# WebSocket配置
# =============================================================================
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_MESSAGE_MAX_SIZE=1048576

# =============================================================================
# 文件上传和存储配置
# =============================================================================

# 文件上传
UPLOAD_MAX_SIZE=10485760  # 10MB
UPLOAD_ALLOWED_EXTENSIONS=.jpg,.jpeg,.png,.gif,.pdf,.docx,.txt,.md

# 存储类型 (local, s3, minio)
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./uploads

# S3/MinIO配置 (当STORAGE_TYPE=s3或minio时需要)
S3_ENDPOINT=https://s3.amazonaws.com  # MinIO时使用你的MinIO地址
S3_ACCESS_KEY=your_s3_access_key
S3_SECRET_KEY=your_s3_secret_key
S3_BUCKET_NAME=pbl-assistant-files
S3_REGION=us-east-1

# =============================================================================
# 缓存配置
# =============================================================================
CACHE_TTL_SHORT=300      # 5分钟
CACHE_TTL_MEDIUM=1800    # 30分钟
CACHE_TTL_LONG=3600      # 1小时

# =============================================================================
# 速率限制配置
# =============================================================================
RATE_LIMIT_CALLS=100     # 每分钟最大请求数
RATE_LIMIT_PERIOD=60     # 时间窗口（秒）

# =============================================================================
# 日志和监控配置
# =============================================================================

# 日志配置
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=./logs/app.log

# 监控配置
ENABLE_METRICS=true
METRICS_PORT=9090

# Sentry错误监控 (可选)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# =============================================================================
# 邮件配置 (可选)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=true

# =============================================================================
# 任务队列配置
# =============================================================================
TASK_QUEUE_NAME=pbl_tasks
TASK_MAX_WORKERS=4
TASK_RETRY_DELAY=60

# =============================================================================
# 开发配置
# =============================================================================
RELOAD_ON_CHANGE=true

# =============================================================================
# Docker Compose相关变量
# =============================================================================

# Grafana管理员密码
GRAFANA_PASSWORD=your_grafana_admin_password

# =============================================================================
# 生产环境额外配置
# =============================================================================

# 当ENVIRONMENT=production时，以下配置会被使用
# ALLOWED_HOSTS=your-production-domain.com,api.your-domain.com
# DEBUG=false
# LOG_LEVEL=ERROR

# =============================================================================
# 安全相关
# =============================================================================

# JWT密钥轮换 (生产环境建议定期更换)
# JWT_ALGORITHM=HS256

# 双因子认证配置
# TWO_FACTOR_ISSUER=PBL智能助手
# TWO_FACTOR_DIGITS=6

# =============================================================================
# 性能调优
# =============================================================================

# 数据库连接池
# DB_POOL_SIZE=20
# DB_MAX_OVERFLOW=0
# DB_POOL_PRE_PING=true
# DB_POOL_RECYCLE=3600

# Redis连接池
# REDIS_POOL_SIZE=10
# REDIS_HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 功能开关
# =============================================================================

# 启用/禁用特定功能
# ENABLE_USER_REGISTRATION=true
# ENABLE_EMAIL_VERIFICATION=true
# ENABLE_TWO_FACTOR_AUTH=false
# ENABLE_FILE_UPLOAD=true
# ENABLE_WEBSOCKET=true
# ENABLE_BATCH_PROCESSING=true

# =============================================================================
# 第三方集成
# =============================================================================

# GitHub集成 (用于代码项目)
# GITHUB_CLIENT_ID=your_github_client_id
# GITHUB_CLIENT_SECRET=your_github_client_secret

# Google OAuth (可选)
# GOOGLE_CLIENT_ID=your_google_client_id
# GOOGLE_CLIENT_SECRET=your_google_client_secret